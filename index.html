<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>
<style>*{box-sizing:border-box}body{font-family:system-ui,sans-serif;margin:0}</style>
<meta name='generator' content='mdx-deck'>
<style data-styled-components="hsARDy kmKUJZ gKaMTo zIEGn enxKql dYzIWH fhSvky jHprQs bJSzQT jjPEjx kVSTZj gjsVpB cXgiMa eCoqJu kaUAEP gtARdA hOCGEu fbxTAJ bNhvRs">
/* sc-component-id: sc-bdVaJa */
.sc-bdVaJa {} .eCoqJu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-bottom:8px;margin-left:auto;margin-right:auto;} @media print{.eCoqJu{display:none;}}
/* sc-component-id: sc-bwzfXH */
.sc-bwzfXH {} .kaUAEP{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:4px solid transparent;background-clip:padding-box;border-radius:9999px;width:8px;height:8px;color:inherit;opacity:0.5;margin:0px;padding:4px;color:#000;background-color:#000;} .kaUAEP:focus{outline:none;box-shadow:0 0 0 1px;}.gtARdA{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:4px solid transparent;background-clip:padding-box;border-radius:9999px;width:8px;height:8px;color:inherit;opacity:0.125;margin:0px;padding:4px;color:#000;background-color:#000;} .gtARdA:focus{outline:none;box-shadow:0 0 0 1px;}
/* sc-component-id: sc-htpNat */
.sc-htpNat {} .cXgiMa{position:fixed;left:0;right:0;bottom:0;}
/* sc-component-id: sc-bxivhb */
.sc-bxivhb {} .fbxTAJ{cursor:pointer;width:64px;height:100vh;}
/* sc-component-id: sc-ifAKCX */
.sc-ifAKCX {} .hOCGEu{position:fixed;top:0;left:0;bottom:0;}
/* sc-component-id: sc-EHOje */
.sc-EHOje {} .bNhvRs{position:fixed;top:0;right:0;bottom:0;}
/* sc-component-id: sc-bZQynM */
.sc-bZQynM {} .kmKUJZ{overflow-x:hidden;width:100%;height:100%;} @media print{.kmKUJZ{height:auto;overflow-x:visible;}}
/* sc-component-id: sc-gzVnrw */
.sc-gzVnrw {} .gKaMTo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-transition-property:-webkit-transform;-webkit-transition-property:transform;transition-property:transform;-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transition-duration:.3s;transition-duration:.3s;-webkit-transform:translate3d(0%,0,0);-ms-transform:translate3d(0%,0,0);transform:translate3d(0%,0,0);} @media print{.gKaMTo{height:auto;display:block;}}
/* sc-component-id: sc-htoDjs */
.sc-htoDjs {} .zIEGn{-webkit-flex:none;-ms-flex:none;flex:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;width:100%;height:100%;padding-left:32px;padding-right:32px;} @media print{.zIEGn{width:100vw;height:100vh;page-break-after:always;page-break-inside:avoid;-webkit-print-color-adjust:exact;}} @media screen and (min-width:40em){.zIEGn{padding-left:64px;padding-right:64px;}} @media screen and (min-width:52em){.zIEGn{padding-left:128px;padding-right:128px;}}
/* sc-component-id: sc-dnqmqq */
.sc-dnqmqq {} .hsARDy{font-family:system-ui,sans-serif;font-size:16px;text-align:center;width:100vw;height:100vh;color:#000;background-color:white;} @media print{.hsARDy{font-size:24px;height:auto;}} @media screen and (min-width:64em){.hsARDy{font-size:32px;}}
/* sc-component-id: sc-fjdhpX */
.sc-fjdhpX {} .dYzIWH{line-height:1.25;font-size:3em;margin-bottom:16px;margin-top:16px;color:heading;}
/* sc-component-id: sc-jzJRlG */
.sc-jzJRlG {}
/* sc-component-id: sc-cSHVUG */
.sc-cSHVUG {} .bJSzQT{line-height:1.25;font-size:2em;margin-bottom:16px;margin-top:16px;color:heading;}
/* sc-component-id: sc-kAzzGY */
.sc-kAzzGY {}
/* sc-component-id: sc-chPdSV */
.sc-chPdSV {} .gjsVpB{line-height:1.25;font-size:1.5em;margin-bottom:16px;margin-top:16px;color:heading;}
/* sc-component-id: sc-kgoBCf */
.sc-kgoBCf {}
/* sc-component-id: sc-kEYyzF */
.sc-kEYyzF {} .fhSvky{font-size:1.5em;}
/* sc-component-id: sc-cvbbAY */
.sc-cvbbAY {} .jjPEjx{font-family:Menlo,monospace;text-align:left;white-space:pre-wrap;font-size:1em;margin:0px;padding:8px;color:#f0f;background-color:#333;}</style>
</head>
<body>
<div id=root><div><div class="sc-dnqmqq hsARDy" mode="NORMAL" step="0" width="100vw" height="100vh" color="text"><div class="sc-bZQynM kmKUJZ"><div class="sc-gzVnrw gKaMTo"><div class="sc-htoDjs zIEGn"><div><h1 class="sc-jzJRlG enxKql sc-fjdhpX dYzIWH" font-size="4" color="heading">JavaScript &amp; Type System</h1><p class="sc-kEYyzF fhSvky" font-size="2">—— ZHAO Jinxiang</p></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">JavaScript&#x27;s basic grammar</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const foo = &#x27;foo&#x27;;
const bar = { a: 1 + 2 + &#x27;123&#x27;};
const baz = [1,&#x27;2&#x27;,{spam:&#x27;spam&#x27;},...[1,2,3]];
const qux = {...{a:&#x27;a&#x27;}, ...foo.startsWith(&#x27;f&#x27;)?{}:{y:&#x27;y&#x27;}};
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Promise &amp; Async function</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const sleep = (timeout,val) =&gt; new Promise((resolve,reject)=&gt;{
  setTimeout(() =&gt; {
    resolve(val);
  }, timeout);
})

const app = async () =&gt; {
  const ret = await sleep(1000,&#x27;hello world&#x27;);
  console.log(ret);
}
app();
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Range —— (Imperative programming)</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const arr = [];

for(let i = 0; i &lt; 20; i++){
  arr.push(i);
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Range —— (Functional programming)</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const arr = Array.from({length:20}).map((x,i)=&gt;i);

const arr2 = Array(20).fill().map((x,i)=&gt;i);

const arr3 = range(0, 20); // Ramda
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Factorial</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const fact = x =&gt; x === 0 ? 1 : x * fact(x - 1)
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Factorial</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const fact = x =&gt; range(1,x+1).reduce((x,y)=&gt;x*y,1);
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Primitive Types &amp; Literal Types</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const a = &#x27;foo&#x27;;
const a:&#x27;foo&#x27; = &#x27;foo&#x27;;

let a = &#x27;foo&#x27;;
let a:string = &#x27;foo&#x27;;

const a = null;
const a = undefined;
const a = 3.14;
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Object Types</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const obj2: {
  foo: number,
  bar: boolean,
  baz: string,
} = {
  foo: 1,
  bar: true,
  baz: &#x27;three&#x27;,
};
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Object Types -- typeof</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const sampleData = [{
  foo: 1,
  bar: true,
  baz: &#x27;three&#x27;,
}];

type sampleData = typeof sampleData
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Object Types -- as</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const sampleData = [{
  foo: 1,
  bar: true,
  baz: &#x27;three&#x27; as &#x27;one&#x27; | &#x27;two&#x27; | &#x27;three&#x27;,
}];

type sampleData = typeof sampleData
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Object Types -- Index types</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">type foo = {
    [key: string]: number;
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Object Types -- Mapped types</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">interface Person{
    name: string;
    age: number;
}
type MyPartial&lt;T&gt; = {
    [P in keyof T]?: T[P];
}
type PersonPartial = MyPartial&lt;Person&gt;
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Function Types</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">function concat(a: string, b: string): string {
  return a + b;
}
</pre><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">const concat:(a: string, b: string) =&gt; string = (a,b) =&gt; {
  return a + b;
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Function Types —— Overloads</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">function concat(a:string, b:string):string;
function concat(a:number, b:number):number;
function concat(a: any, b: any): any {
  return typeof a === &#x27;number&#x27; ? a + b : `${a}, ${b}`;
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Function Type —— Generics</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">function identity&lt;T&gt;(arg: T): T {
    return arg;
}
const c = identity(1);
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Tuple &amp; Rest Params</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">function tuple&lt;t extends any[]&gt;(...xs:t){
  return xs
}
const foobar = [{a:1},()=&gt;&#x27;foo&#x27;+&#x27;1&#x27;]
const bazqux = tuple({a:1},()=&gt;&#x27;foo&#x27;+&#x27;1&#x27;)
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Union Types</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">function toStringPrimitives(value: number | boolean | string) {
  return String(value);
}

toStringPrimitives(1);       // Works!
toStringPrimitives(true);    // Works!
toStringPrimitives(&#x27;three&#x27;); // Works!

// $ExpectError
toStringPrimitives({ prop: &#x27;val&#x27; }); // Error!
// $ExpectError
toStringPrimitives([1, 2, 3, 4, 5]); // Error!
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Unions &amp; Refinements</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">function toStringPrimitives(value: number | boolean | string) {
  if (typeof value === &#x27;number&#x27;) {
    return value.toLocaleString([], { maximumSignificantDigits: 3 }); // Works!
  }
  // ...
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Disjoint Unions</h2><p class="sc-kEYyzF fhSvky" font-size="2">Tagged Union</p><h3 class="sc-kgoBCf kVSTZj sc-chPdSV gjsVpB" font-size="2" color="heading">Problem</h3><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">{ success: true, value: [{id:1,score:2},{id:2,score:22},] };
</pre><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">{ success: false, error: &#x27;Bad request&#x27; };
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Disjoint Unions</h2><h3 class="sc-kgoBCf kVSTZj sc-chPdSV gjsVpB" font-size="2" color="heading">2B 程序员</h3><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">type Response = any;
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h3 class="sc-kgoBCf kVSTZj sc-chPdSV gjsVpB" font-size="2" color="heading">普通程序员</h3><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">type Response = {
  success: boolean,
  value?: Array&lt;{id:number,score:number}&gt;,
  error?: string
};

function handleResponse(response: Response) {
  if (response.success) {
    // $ExpectError
    var value: boolean = response.value; // Error!
  } else {
    // $ExpectError
    var error: string = response.error; // Error!
  }
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Disjoint Unions</h2><h3 class="sc-kgoBCf kVSTZj sc-chPdSV gjsVpB" font-size="2" color="heading">正常的 TypeScript 程序员</h3><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">type Success = { success: true, value: Array&lt;{id:number,score:number}&gt; };
type Failed  = { success: false, message: string };
type Response = Success | Failed
function handleResponse(response: Response ) {
  if(response.success){
    // ...
  }
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Disjoint Unions</h2><h3 class="sc-kgoBCf kVSTZj sc-chPdSV gjsVpB" font-size="2" color="heading">偷懒的 TypeScript 程序员</h3><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">type TheResponse = 
  | { success: true, value: Array&lt;{id:number,score:number}&gt; }
  | { success: false, message: string };
function handleResponse(response: TheResponse ) {
  if(response.success){
    // ...
  }
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Intersection Types</h2><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">type One = { foo: number };
type Two = { bar: boolean };

type Both = One &amp; Two;

var value: Both = {
  foo: 1,
  bar: true
};
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Type Guards</h2><h3 class="sc-kgoBCf kVSTZj sc-chPdSV gjsVpB" font-size="2" color="heading">Problem 1</h3><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">interface Bird {
    fly();
    layEggs();
}

interface Fish {
    swim();
    layEggs();
}

function getSmallPet(): Fish | Bird {
    // ...
}

let pet = getSmallPet();
pet.layEggs(); // okay
pet.swim();    // errors
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Type Guards</h2><h3 class="sc-kgoBCf kVSTZj sc-chPdSV gjsVpB" font-size="2" color="heading">Problem 2</h3><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">let pet = getSmallPet();

// Each of these property accesses will cause an error
if (pet.swim) {
    pet.swim();
}
else if (pet.fly) {
    pet.fly();
}
</pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bJSzQT" font-size="3" color="heading">Type Guards</h2><h3 class="sc-kgoBCf kVSTZj sc-chPdSV gjsVpB" font-size="2" color="heading">User-Defined Type Guards</h3><pre class="language-typescript sc-cvbbAY jjPEjx" font-size="1" color="pre">interface Bird { fly(); layEggs(); }

interface Fish { swim(); layEggs(); }
function isFish(pet: Fish | Bird): pet is Fish {
    return (&lt;Fish&gt;pet).swim !== undefined;
}

declare const pet: Fish | Bird

if (isFish(pet)) {
    pet.swim();
}
else {
    pet.fly();
}
</pre></div></div></div></div></div></div><div class="sc-htpNat cXgiMa"><div class="sc-bdVaJa eCoqJu"><button class="sc-bwzfXH kaUAEP" title="go to: 0" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 1" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 2" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 3" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 4" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 5" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 6" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 7" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 8" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 9" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 10" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 11" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 12" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 13" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 14" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 15" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 16" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 17" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 18" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 19" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 20" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 21" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 22" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 23" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 24" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 25" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 26" color="text"></button><button class="sc-bwzfXH gtARdA" title="go to: 27" color="text"></button></div></div><div class="sc-ifAKCX hOCGEu sc-bxivhb fbxTAJ" role="button" title="Previous Slide"></div><div class="sc-EHOje bNhvRs sc-bxivhb fbxTAJ" role="button" title="Next Slide"></div></div>
<script src="main.js"></script>
</body>
</html>
